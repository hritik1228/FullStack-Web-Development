<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Fetch API</title>
</head>

<body>
    <form id="myForm">
        Title: <input type="text" id="titleText"><br><br> Body: <input type="text" id="bodyText"><br><br> User ID: <input type="text" id="userid">
        <input type="submit" value="Submit" id="saveForm">
    </form>

    <script>
        // To read any file from server

        // fetch("fruit.txt").then((response) => {
        //     return response.text();
        // }).then((result) => {
        //     console.log(result);
        //     document.write(result);
        // })

        // To read JSON Data from server

        // fetch("https://jsonplaceholder.typicode.com/users").then((response) => {
        //     return response.json();
        // }).then((data) => {
        //     for (x in data) {
        //         // console.log(data[x].name);
        //         console.log(data[x]);
        //         document.write(`${data[x].id} - ${data[x].name} - ${data[x].email} ${data[x].address.geo.lat}<br>`);
        //     }
        //     // document.write(result);
        // }).catch((error) => {
        //     // console.log(error);
        //     document.write('Incorrect path provided');
        //     console.log('Incorrect path provided');
        // })

        // fetch("students.json").then((response) => {
        //     return response.json();
        // }).then((data) => {
        //     for (x in data) {
        //         document.write(`${data[x].name}-${data[x].age}<br>`);
        //     }
        //     // document.write(result);
        //     // console.log(data);
        // }).catch((error) => {
        //     // console.log(error);
        //     document.write('Incorrect path provided');
        //     console.log('Incorrect path provided');
        // })

        // Insert data in server method:"POST"
        // Update data in server method:"PUT"
        // Delete data in server method:"DELETE"
        // Read data in server method:"GET"
        // body:data--> Form Data/JSON Data/Text
        // header:{'Content-Type':'application/json' or 'Content-Type':'application/x-www-form-urlencoded'}

        // Insert data in server method:"POST"
        // var obj = {
        //     title: 'foo',
        //     body: 'bar',
        //     userId: 1,
        // };
        // fetch('https://jsonplaceholder.typicode.com/posts', {
        //         method: 'POST',
        //         body: JSON.stringify(obj),
        //         headers: {
        //             'Content-type': 'application/json; charset=UTF-8',
        //         },
        //     })
        //     .then((response) => response.json())
        //     .then((json) => console.log(json));

        // Update data in server method:"PUT"
        // var obj = {
        //     id: 1,
        //     title: 'foo',
        //     body: 'bar',
        //     userId: 1,
        // }
        // fetch('https://jsonplaceholder.typicode.com/posts/1', {
        //         method: 'PUT',
        //         body: JSON.stringify(obj),
        //         headers: {
        //             'Content-type': 'application/json; charset=UTF-8',
        //         },
        //     })
        //     .then((response) => response.json())
        //     .then((json) => console.log(json));

        // Delete data in server method:"DELETE"
        // fetch('https://jsonplaceholder.typicode.com/posts/1', {
        //     method: 'DELETE',
        // });

        // Insert data from form [in JSON] to server method:"POST"
        // document.getElementById('saveForm').addEventListener("click", function(e) {
        //     e.preventDefault();
        //     var obj = {
        //         title: document.getElementById("titleText").value,
        //         body: document.getElementById("bodyText").value,
        //         userId: document.getElementById("userid").value,
        //     };
        //     fetch('https://jsonplaceholder.typicode.com/posts', {
        //             method: 'POST',
        //             body: JSON.stringify(obj),
        //             headers: {
        //                 'Content-type': 'application/json; charset=UTF-8',
        //             },
        //         })
        //         .then((response) => response.json())
        //         .then((json) => console.log(json));
        // })

        // Insert data from form to server method:"POST"
        document.getElementById('saveForm').addEventListener("click", function(e) {
            e.preventDefault();

            fetch('https://jsonplaceholder.typicode.com/posts', {
                    method: 'POST',
                    body: document.getElementById("myForm"),
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                })
                .then((response) => response.json())
                .then((json) => console.log(json));
        })
    </script>
</body>

</html>