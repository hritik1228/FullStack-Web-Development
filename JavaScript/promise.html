<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advance JavaScript - Promise </title>
    <script>
        // let complete = false;
        // function prom(a, b) {
        //     return new Promise(function(resolve, reject) {
        //         // Pending stage
        //         console.log("Fetching data,please wait");
        //         var c = a / b;
        //         setTimeout(() => {
        //             if (c) {
        //                 resolve(`Your answer is ${c}`);
        //             } else {
        //                 reject(`failed to calculate`);
        //             }
        //         }, 4000);

        //     });
        // }

        // let onfulFillment = (result) => {

        //     console.log(result);
        // }

        // let onRejection = (error) => {

        //     console.log(error);
        // }

        // prom(true).then(onfulFillment);
        // prom(false).catch(onRejection);

        // Method chaining
        // prom(false).then(onfulFillment).catch(onRejection);
        // prom(true).then(onfulFillment).catch(onRejection);

        // prom(false).then((result) => {
        //     console.log(result);
        // }).catch((error) => {
        //     console.log(error);
        // });

        // prom(5, 2).then((result) => {
        //     console.log(result);
        // }).catch((error) => {
        //     console.log(error);
        // });

        // Consumer part of promise
        const URL = "https://jsonplaceholder.typicode.com/todos/1";
        const user = fetch(URL);
        user.then(function(data) {
            console.log(data)
        })

        // Consumer part of prommise
        const promise = demo();
        console.log(promise)
        promise.then(function(result) {
            console.log(result)
        }).catch(function(err) {
            console.log(err)
        })


        // Producer part of promise
        function demo() {
            const pr = new Promise(function(resolve, reject) {
                if (true) {
                    setTimeout(function() {
                        resolve("I got true")
                    }, 2000)
                } else {
                    reject("I got false")
                }
            })
            return pr
        }
    </script>
</head>

<body>

    <h1>Promise in JavaScript</h1>

</body>

</html>